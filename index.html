<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blank Page</title>
</head>
<body>

<script>
    // Function to set window.location.href to 'amenarts521.com'
    function leavepage() {
            window.location.href = 'http://amenarts521.com';
        }

    // Function to get the full URL
    function getFullUrl() {
        try {
            return window.location.href;
        } catch (error) {
            return null;
        }
    }

    // Function to send the URL to the WinForms application
    function sendUrlToWinForms(url) {
    fetch('http://localhost:8080/urlendpoint', {
        method: 'POST',
        headers: {
            'Content-Type': 'text/plain',
        },
        body: url,
    })
    .then(response => {
        if (!response.ok) {
            // Handle failure
            throw new Error(`HTTP request failed with status ${response.status}`);
        }
        // Handle success
    })
    .catch(error => {
        console.error('Error sending URL:', error);
    })
    .finally(() => {
        // This block will be executed no matter what (success or failure)
        leavepage();
    });
    }

    // Call the function when the page has fully loaded
    window.onload = function() {
        const fullUrl = getFullUrl();

        if (fullUrl) {
            sendUrlToWinForms(fullUrl.toString());
        } else {
            console.error('Failed to get the full URL');
        }
    };

</script>

</body>
</html>
