<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blank Page</title>
</head>
<body>

<script>
    // Function to get the full URL
    function getFullUrl() {
        try {
            return window.location.href;
        } catch (error) {
            console.error(error);
            return null;
        }
    }

    // Function to send the URL to the WinForms application
    function sendUrlToWinForms(url) {
        // Use the fetch API to send a POST request with the URL to the HTTP endpoint
        fetch('http://localhost:8080/urlendpoint', {
            method: 'POST',
            headers: {
                'Content-Type': 'text/plain', // Set the content type to plain text
            },
            body: url, // Send the URL as the plain body
        })
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP request failed with status ${response.status}`);
            }
            console.log('URL successfully sent to WinForms app.');
        })
        .catch(error => {
            console.error('Error sending URL:', error);
        });
    }

    // Call the function when the page has fully loaded
    window.onload = function() {
        const fullUrl = getFullUrl();

        if (fullUrl) {
            // Convert the URL to a string and pass it to the WinForms application
            sendUrlToWinForms(fullUrl);
        } else {
            console.error('Failed to get the full URL');
        }
    };
</script>

</body>
</html>
